<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GFIM WORLD WIDE - Bureau de Muanda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .modal-backdrop {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(4px);
            display: none;
            position: fixed;
            inset: 0;
            z-index: 50;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }
        .modal-backdrop.active { display: flex; }
        
        .stat-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05);
        }

        input::placeholder { color: #cbd5e1; }

        @media print {
            .no-print { display: none !important; }
            main { padding: 0 !important; }
        }
    </style>
</head>
<body class="bg-[#f8fafc] min-h-screen text-slate-900">

    <div class="flex flex-col lg:flex-row min-h-screen">
        <!-- Sidebar -->
        <aside class="w-full lg:w-72 bg-white border-r border-slate-200 p-6 space-y-8 no-print shrink-0">
            <div class="flex items-center space-x-3 px-2">
                <img src="GFIM - logo.png" alt="GFIM Logo" class="w-10 h-10 object-contain" onerror="this.src='https://placehold.co/40x40?text=GFIM'">
                <div>
                    <h1 class="text-sm font-black tracking-tighter text-slate-800 leading-tight">GFIM WORLD WIDE</h1>
                    <p class="text-[10px] text-blue-600 font-bold uppercase">Bureau de Muanda</p>
                </div>
            </div>
            
            <nav class="space-y-1">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 px-4">Menu Principal</p>
                <button onclick="switchTab('dashboard')" class="nav-btn active flex items-center space-x-3 px-4 py-3 rounded-xl w-full transition-all bg-blue-50 text-blue-600 font-semibold" data-tab="dashboard">
                    <i data-lucide="layout-grid" class="w-5 h-5"></i><span>Tableau de bord</span>
                </button>
                <button onclick="switchTab('register')" class="nav-btn flex items-center space-x-3 px-4 py-3 rounded-xl w-full transition-all text-slate-500 hover:bg-slate-50" data-tab="register">
                    <i data-lucide="user-plus" class="w-5 h-5"></i><span>Inscriptions</span>
                </button>
                <button onclick="switchTab('apprenants')" class="nav-btn flex items-center space-x-3 px-4 py-3 rounded-xl w-full transition-all text-slate-500 hover:bg-slate-50" data-tab="apprenants">
                    <i data-lucide="users" class="w-5 h-5"></i><span>Apprenants</span>
                </button>
                <button onclick="switchTab('trainers')" class="nav-btn flex items-center space-x-3 px-4 py-3 rounded-xl w-full transition-all text-slate-500 hover:bg-slate-50" data-tab="trainers">
                    <i data-lucide="briefcase" class="w-5 h-5"></i><span>Formateurs</span>
                </button>
                <button onclick="switchTab('sites')" class="nav-btn flex items-center space-x-3 px-4 py-3 rounded-xl w-full transition-all text-slate-500 hover:bg-slate-50" data-tab="sites">
                    <i data-lucide="map-pin" class="w-5 h-5"></i><span>Sites & Planning</span>
                </button>
                <button onclick="switchTab('finance')" class="nav-btn flex items-center space-x-3 px-4 py-3 rounded-xl w-full transition-all text-slate-500 hover:bg-slate-50" data-tab="finance">
                    <i data-lucide="wallet" class="w-5 h-5"></i><span>Comptabilité</span>
                </button>
            </nav>
        </aside>

        <main class="flex-1 p-6 lg:p-10">
            
            <!-- Dashboard -->
            <section id="tab-dashboard" class="tab-content active space-y-8">
                <header class="flex justify-between items-end">
                    <div>
                        <h2 class="text-3xl font-extrabold text-slate-800 tracking-tight">Tableau de Bord</h2>
                        <p class="text-slate-500 font-medium">Aperçu en temps réel de la base de données de Muanda.</p>
                    </div>
                    <div class="bg-white px-4 py-2 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-3">
                        <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                        <span id="live-clock" class="text-xs font-bold text-slate-600 uppercase tracking-widest">--:--:--</span>
                    </div>
                </header>

                <!-- Stats Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="stat-card bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm relative overflow-hidden">
                        <div class="absolute -right-4 -top-4 bg-blue-50 w-24 h-24 rounded-full opacity-50"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-4">
                                <div class="p-3 bg-blue-600 rounded-2xl text-white shadow-lg shadow-blue-100">
                                    <i data-lucide="users-round" class="w-5 h-5"></i>
                                </div>
                                <span class="text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-1 rounded-lg">TOTAL</span>
                            </div>
                            <p id="dash-students" class="text-4xl font-black text-slate-800">0</p>
                            <p class="text-xs font-bold text-slate-400 uppercase mt-1">Apprenants inscrits</p>
                        </div>
                    </div>

                    <div class="stat-card bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm relative overflow-hidden">
                        <div class="absolute -right-4 -top-4 bg-emerald-50 w-24 h-24 rounded-full opacity-50"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-4">
                                <div class="p-3 bg-emerald-500 rounded-2xl text-white shadow-lg shadow-emerald-100">
                                    <i data-lucide="banknote" class="w-5 h-5"></i>
                                </div>
                                <span class="text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-1 rounded-lg">RECETTES</span>
                            </div>
                            <p id="dash-revenue" class="text-4xl font-black text-slate-800">0$</p>
                            <p class="text-xs font-bold text-slate-400 uppercase mt-1">Total généré</p>
                        </div>
                    </div>

                    <div class="stat-card bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm relative overflow-hidden">
                        <div class="absolute -right-4 -top-4 bg-purple-50 w-24 h-24 rounded-full opacity-50"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-4">
                                <div class="p-3 bg-purple-500 rounded-2xl text-white shadow-lg shadow-purple-100">
                                    <i data-lucide="graduation-cap" class="w-5 h-5"></i>
                                </div>
                                <span class="text-[10px] font-black text-purple-600 bg-purple-50 px-2 py-1 rounded-lg">EXPERTS</span>
                            </div>
                            <p id="dash-trainers-count" class="text-4xl font-black text-slate-800">0</p>
                            <p class="text-xs font-bold text-slate-400 uppercase mt-1">Formateurs actifs</p>
                        </div>
                    </div>

                    <div class="stat-card bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm relative overflow-hidden">
                        <div class="absolute -right-4 -top-4 bg-orange-50 w-24 h-24 rounded-full opacity-50"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-4">
                                <div class="p-3 bg-orange-500 rounded-2xl text-white shadow-lg shadow-orange-100">
                                    <i data-lucide="map-pin" class="w-5 h-5"></i>
                                </div>
                                <span class="text-[10px] font-black text-orange-600 bg-orange-50 px-2 py-1 rounded-lg">CAPACITÉ</span>
                            </div>
                            <p id="dash-occupancy" class="text-4xl font-black text-slate-800">0%</p>
                            <p class="text-xs font-bold text-slate-400 uppercase mt-1">Taux d'occupation</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Répartition -->
                    <div class="lg:col-span-1 bg-white p-8 rounded-[40px] border border-slate-100 shadow-sm space-y-6">
                        <h3 class="font-black text-lg text-slate-800">Répartition des Cours</h3>
                        <div class="relative flex justify-center py-4">
                            <svg viewBox="0 0 36 36" class="w-48 h-48 transform -rotate-90">
                                <circle cx="18" cy="18" r="16" fill="transparent" stroke="#f1f5f9" stroke-width="3"></circle>
                                <circle id="pie-langues" cx="18" cy="18" r="16" fill="transparent" stroke="#3b82f6" stroke-width="3" stroke-dasharray="0 100"></circle>
                                <circle id="pie-metiers" cx="18" cy="18" r="16" fill="transparent" stroke="#10b981" stroke-width="3" stroke-dasharray="0 100" stroke-dashoffset="0"></circle>
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <p class="text-[10px] font-bold text-slate-400 uppercase">Inscrits</p>
                                <p id="pie-total-center" class="text-2xl font-black">0</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 rounded-full bg-blue-600"></div>
                                    <span class="text-xs font-bold text-slate-600">Pôles Langues</span>
                                </div>
                                <span id="count-langues" class="text-xs font-black">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 rounded-full bg-emerald-500"></div>
                                    <span class="text-xs font-bold text-slate-600">Pôles Métiers</span>
                                </div>
                                <span id="count-metiers" class="text-xs font-black">0</span>
                            </div>
                        </div>
                    </div>
                    <!-- Activités -->
                    <div class="lg:col-span-2 bg-white p-8 rounded-[40px] border border-slate-100 shadow-sm space-y-6">
                        <div class="flex justify-between items-center">
                            <h3 class="font-black text-lg text-slate-800">Dernières Inscriptions</h3>
                            <button onclick="switchTab('apprenants')" class="text-[10px] font-black text-blue-600 uppercase hover:underline">Voir tout</button>
                        </div>
                        <div id="recent-activity" class="space-y-4"></div>
                    </div>
                </div>
            </section>

            <!-- Section Inscription Mise à Jour -->
            <section id="tab-register" class="tab-content max-w-5xl mx-auto space-y-8">
                <header class="flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
                    <div>
                        <h2 class="text-3xl font-extrabold text-slate-800 tracking-tight">Nouvelle Inscription</h2>
                        <p class="text-slate-500">Remplissez le formulaire complet pour enregistrer un nouvel apprenant.</p>
                    </div>
                    <div class="flex items-center gap-2 text-[10px] font-black uppercase text-slate-400">
                        <span class="w-3 h-3 rounded-full bg-blue-600"></span> Étape 1/4
                    </div>
                </header>

                <form id="reg-form" class="space-y-8">
                    <!-- 1. Informations Personnelles -->
                    <div class="bg-white p-8 rounded-[40px] border border-slate-100 shadow-sm space-y-6">
                        <div class="flex items-center gap-3 border-b border-slate-50 pb-4 mb-6">
                            <div class="bg-blue-50 text-blue-600 p-2 rounded-xl"><i data-lucide="user"></i></div>
                            <h3 class="font-bold text-slate-800">1. Informations Personnelles</h3>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
                            <!-- Photo Upload -->
                            <div class="md:col-span-3 space-y-4">
                                <div class="w-full aspect-square bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200 flex flex-col items-center justify-center text-slate-400 relative overflow-hidden group">
                                    <i data-lucide="camera" class="w-8 h-8 mb-2"></i>
                                    <span class="text-[10px] font-bold uppercase">Photo</span>
                                    <input type="file" id="student-photo" class="absolute inset-0 opacity-0 cursor-pointer">
                                    <img id="student-photo-preview" class="absolute inset-0 w-full h-full object-cover hidden">
                                </div>
                            </div>

                            <!-- Fields -->
                            <div class="md:col-span-9 grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="space-y-1">
                                    <label class="text-[10px] font-bold uppercase text-slate-400">Nom complet</label>
                                    <input name="lastName" required placeholder="Ex: MAVUNGU" class="w-full bg-slate-50 p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-600">
                                </div>
                                <div class="space-y-1">
                                    <label class="text-[10px] font-bold uppercase text-slate-400">Prénom</label>
                                    <input name="firstName" required placeholder="Ex: Jean" class="w-full bg-slate-50 p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-600">
                                </div>
                                <div class="space-y-1">
                                    <label class="text-[10px] font-bold uppercase text-slate-400">Date de naissance</label>
                                    <input type="date" name="birthDate" required class="w-full bg-slate-50 p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-600">
                                </div>
                                <div class="space-y-1">
                                    <label class="text-[10px] font-bold uppercase text-slate-400">Sexe</label>
                                    <div class="flex gap-2">
                                        <label class="flex-1 p-3 bg-slate-50 rounded-xl cursor-pointer has-[:checked]:bg-blue-600 has-[:checked]:text-white transition-all text-center text-xs font-bold">
                                            <input type="radio" name="gender" value="M" checked class="hidden"> M
                                        </label>
                                        <label class="flex-1 p-3 bg-slate-50 rounded-xl cursor-pointer has-[:checked]:bg-blue-600 has-[:checked]:text-white transition-all text-center text-xs font-bold">
                                            <input type="radio" name="gender" value="F" class="hidden"> F
                                        </label>
                                    </div>
                                </div>
                                <div class="space-y-1 md:col-span-2">
                                    <label class="text-[10px] font-bold uppercase text-slate-400">Adresse de résidence</label>
                                    <input name="address" required placeholder="Ex: Avenue de la Paix, Quartier Océan" class="w-full bg-slate-50 p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-600">
                                </div>
                                <div class="space-y-1">
                                    <label class="text-[10px] font-bold uppercase text-slate-400">Téléphone</label>
                                    <input type="tel" name="phone" required placeholder="+243 ..." class="w-full bg-slate-50 p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-600">
                                </div>
                                <div class="space-y-1">
                                    <label class="text-[10px] font-bold uppercase text-slate-400">E-mail</label>
                                    <input type="email" name="email" placeholder="nom@exemple.com" class="w-full bg-slate-50 p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-600">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Choix de la Formation -->
                    <div class="bg-white p-8 rounded-[40px] border border-slate-100 shadow-sm space-y-6">
                        <div class="flex items-center gap-3 border-b border-slate-50 pb-4 mb-6">
                            <div class="bg-emerald-50 text-emerald-600 p-2 rounded-xl"><i data-lucide="book-open"></i></div>
                            <h3 class="font-bold text-slate-800">2. Pôles de Formation</h3>
                        </div>
                        <div id="course-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Injected from JS -->
                        </div>
                    </div>

                    <!-- 3. Profil et Objectifs -->
                    <div class="bg-white p-8 rounded-[40px] border border-slate-100 shadow-sm space-y-6">
                        <div class="flex items-center gap-3 border-b border-slate-50 pb-4 mb-6">
                            <div class="bg-purple-50 text-purple-600 p-2 rounded-xl"><i data-lucide="target"></i></div>
                            <h3 class="font-bold text-slate-800">3. Profil et Objectifs</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-1">
                                <label class="text-[10px] font-bold uppercase text-slate-400">Niveau d'études actuel</label>
                                <input name="educationLevel" placeholder="Ex: Licence en Gestion" class="w-full bg-slate-50 p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-600">
                            </div>
                            <div class="space-y-1">
                                <label class="text-[10px] font-bold uppercase text-slate-400">Statut actuel</label>
                                <select name="status" class="w-full bg-slate-50 p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-600 text-sm">
                                    <option value="Étudiant">Étudiant</option>
                                    <option value="Salarié">Salarié</option>
                                    <option value="En recherche d'emploi">En recherche d'emploi</option>
                                    <option value="Autre">Autre</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Disponibilités et Type de cours -->
                    <div class="bg-white p-8 rounded-[40px] border border-slate-100 shadow-sm space-y-6">
                        <div class="flex items-center gap-3 border-b border-slate-50 pb-4 mb-6">
                            <div class="bg-orange-50 text-orange-600 p-2 rounded-xl"><i data-lucide="calendar"></i></div>
                            <h3 class="font-bold text-slate-800">4. Disponibilités & Format</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="space-y-3">
                                <label class="text-[10px] font-bold uppercase text-slate-400">Créneaux souhaités</label>
                                <div class="flex flex-wrap gap-2">
                                    <label class="flex items-center gap-2 bg-slate-50 px-3 py-2 rounded-xl cursor-pointer has-[:checked]:bg-orange-600 has-[:checked]:text-white transition-all text-xs font-bold">
                                        <input type="checkbox" name="schedulePref" value="Matin" class="hidden"> Matin
                                    </label>
                                    <label class="flex items-center gap-2 bg-slate-50 px-3 py-2 rounded-xl cursor-pointer has-[:checked]:bg-orange-600 has-[:checked]:text-white transition-all text-xs font-bold">
                                        <input type="checkbox" name="schedulePref" value="Après-midi" class="hidden"> Après-midi
                                    </label>
                                    <label class="flex items-center gap-2 bg-slate-50 px-3 py-2 rounded-xl cursor-pointer has-[:checked]:bg-orange-600 has-[:checked]:text-white transition-all text-xs font-bold">
                                        <input type="checkbox" name="schedulePref" value="Soir" class="hidden"> Soir
                                    </label>
                                    <label class="flex items-center gap-2 bg-slate-50 px-3 py-2 rounded-xl cursor-pointer has-[:checked]:bg-orange-600 has-[:checked]:text-white transition-all text-xs font-bold">
                                        <input type="checkbox" name="schedulePref" value="Week-end" class="hidden"> Week-end
                                    </label>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <label class="text-[10px] font-bold uppercase text-slate-400">Type de cours</label>
                                <div class="flex gap-2">
                                    <label class="flex-1 p-3 bg-slate-50 rounded-xl cursor-pointer has-[:checked]:bg-blue-600 has-[:checked]:text-white transition-all">
                                        <input type="radio" name="courseType" value="Groupe" checked onchange="calcPrice()" class="hidden">
                                        <div class="text-center font-bold text-xs uppercase">Groupe (2$)</div>
                                    </label>
                                    <label class="flex-1 p-3 bg-slate-50 rounded-xl cursor-pointer has-[:checked]:bg-blue-600 has-[:checked]:text-white transition-all">
                                        <input type="radio" name="courseType" value="Solo" onchange="calcPrice()" class="hidden">
                                        <div class="text-center font-bold text-xs uppercase">Privé (20$)</div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Bar -->
                    <div class="p-6 bg-slate-900 rounded-[32px] flex flex-col md:flex-row justify-between items-center text-white gap-6">
                        <div class="flex items-center gap-6">
                            <div class="text-center md:text-left">
                                <p class="text-[10px] font-bold text-slate-400 uppercase">Total Frais Inscription</p>
                                <p id="reg-price" class="text-3xl font-black">0$</p>
                            </div>
                            <div class="h-10 w-px bg-slate-700 hidden md:block"></div>
                            <div class="text-center md:text-left">
                                <p class="text-[10px] font-bold text-slate-400 uppercase">Estimation en Francs</p>
                                <p id="reg-price-fc" class="text-xl font-bold text-slate-300">0 FC</p>
                            </div>
                        </div>
                        <button type="submit" class="w-full md:w-auto bg-blue-600 px-12 py-5 rounded-2xl font-bold hover:bg-blue-500 hover:scale-105 active:scale-95 transition-all shadow-xl shadow-blue-900/20">
                            Finaliser l'Inscription
                        </button>
                    </div>
                </form>
            </section>

            <!-- Liste Apprenants -->
            <section id="tab-apprenants" class="tab-content space-y-6">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">Répertoire des Apprenants</h2>
                    <button onclick="window.print()" class="text-xs font-bold bg-white border border-slate-200 px-4 py-2 rounded-xl flex items-center gap-2">
                        <i data-lucide="download" class="w-4 h-4"></i> Exporter
                    </button>
                </div>
                <div class="bg-white rounded-[32px] overflow-hidden border border-slate-100 shadow-sm overflow-x-auto">
                    <table class="w-full text-left">
                        <thead class="bg-slate-50 border-b">
                            <tr>
                                <th class="p-5 text-[10px] font-bold uppercase text-slate-400">Photo</th>
                                <th class="p-5 text-[10px] font-bold uppercase text-slate-400">Nom & Prénom</th>
                                <th class="p-5 text-[10px] font-bold uppercase text-slate-400">Formation</th>
                                <th class="p-5 text-[10px] font-bold uppercase text-slate-400">Sexe</th>
                                <th class="p-5 text-[10px] font-bold uppercase text-slate-400">Téléphone</th>
                                <th class="p-5 text-[10px] font-bold uppercase text-slate-400">Action</th>
                            </tr>
                        </thead>
                        <tbody id="apprenants-tbody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Autres sections (Formateurs, Sites, Finance) inchangées mais gardées fonctionnelles -->
            <section id="tab-trainers" class="tab-content space-y-8">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-slate-800">Gestion des Formateurs</h2>
                    <button onclick="openTrainerModal()" class="bg-blue-600 text-white px-6 py-3 rounded-2xl flex items-center gap-2 font-bold shadow-lg">
                        <i data-lucide="plus" class="w-5 h-5"></i> Nouveau Formateur
                    </button>
                </div>
                <div id="trainers-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </section>

            <section id="tab-sites" class="tab-content space-y-8">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-slate-800">Sites & Planning</h2>
                    <button onclick="toggleModal('site-modal', true)" class="bg-blue-600 text-white px-6 py-3 rounded-2xl flex items-center gap-2 font-bold">
                        <i data-lucide="plus" class="w-5 h-5"></i> Nouveau Site
                    </button>
                </div>
                <div id="sites-list" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
            </section>

            <section id="tab-finance" class="tab-content space-y-8 text-center py-20">
                <div class="max-w-md mx-auto space-y-4">
                    <div class="w-20 h-20 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto">
                        <i data-lucide="wallet" class="w-10 h-10"></i>
                    </div>
                    <h2 class="text-2xl font-bold">Module Comptabilité</h2>
                    <p class="text-slate-500">Le suivi détaillé des paiements mensuels est en cours de déploiement.</p>
                </div>
            </section>

        </main>
    </div>

    <!-- Modals (Trainer & Site) -->
    <div id="trainer-modal" class="modal-backdrop">
        <div class="bg-white rounded-[40px] p-8 max-w-4xl w-full mx-4 shadow-2xl relative max-h-[90vh] overflow-y-auto">
            <button onclick="toggleModal('trainer-modal', false)" class="absolute top-6 right-6 text-slate-300 hover:text-slate-600"><i data-lucide="x"></i></button>
            <form id="trainer-form" class="space-y-8">
                <input type="hidden" id="edit-trainer-id">
                <h3 class="text-xl font-bold">Fiche Formateur</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="space-y-4 text-center">
                        <div class="relative group mx-auto w-40 h-40">
                            <div id="trainer-photo-preview-div" class="w-40 h-40 bg-slate-100 rounded-3xl flex items-center justify-center border-2 border-dashed border-slate-200 overflow-hidden">
                                <i data-lucide="camera" class="w-8 h-8 text-slate-300"></i>
                            </div>
                            <input type="file" id="trainer-photo-input" accept="image/*" class="absolute inset-0 opacity-0 cursor-pointer">
                        </div>
                        <input name="name" placeholder="Nom Complet" required class="w-full bg-slate-50 p-3 rounded-xl outline-none">
                    </div>
                    <div class="md:col-span-2 grid grid-cols-2 gap-4">
                        <div class="space-y-1">
                            <label class="text-[10px] font-bold uppercase text-slate-400">Spécialité</label>
                            <select name="subject" id="trainer-subject-select" class="w-full bg-slate-50 p-3 rounded-xl outline-none"></select>
                        </div>
                        <div class="space-y-1">
                            <label class="text-[10px] font-bold uppercase text-slate-400">Expérience</label>
                            <input name="experience" required class="w-full bg-slate-50 p-3 rounded-xl outline-none" placeholder="Ex: 5 ans">
                        </div>
                        <div class="col-span-2 space-y-1">
                            <label class="text-[10px] font-bold uppercase text-slate-400">Affectation Sites</label>
                            <div id="trainer-sites-checkboxes" class="flex flex-wrap gap-2 pt-1"></div>
                        </div>
                    </div>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white p-4 rounded-2xl font-bold">Enregistrer le formateur</button>
            </form>
        </div>
    </div>

    <div id="site-modal" class="modal-backdrop">
        <div class="bg-white rounded-[40px] p-8 max-w-lg w-full mx-4 shadow-2xl relative">
            <button onclick="toggleModal('site-modal', false)" class="absolute top-6 right-6 text-slate-300 hover:text-slate-600"><i data-lucide="x"></i></button>
            <form id="site-form" class="space-y-6">
                <h3 class="text-xl font-bold">Ajouter un nouveau site</h3>
                <div class="space-y-4">
                    <input name="siteName" required placeholder="Nom du site" class="w-full bg-slate-50 p-3 rounded-xl outline-none">
                    <input name="location" required placeholder="Localisation" class="w-full bg-slate-50 p-3 rounded-xl outline-none">
                    <input type="number" name="capacity" required placeholder="Capacité" class="w-full bg-slate-50 p-3 rounded-xl outline-none">
                    <select name="theme" class="w-full bg-slate-50 p-3 rounded-xl outline-none">
                        <option value="blue">Bleu</option><option value="emerald">Emeraude</option><option value="red">Rouge</option>
                    </select>
                    <input name="schedule" required placeholder="Ex: Lun - Sam : 08h - 17h" class="w-full bg-slate-50 p-3 rounded-xl outline-none">
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white p-4 rounded-2xl font-bold">Enregistrer le site</button>
            </form>
        </div>
    </div>

    <script>
        const POLES = {
            "Pôle Langues & Communication": [
                { name: "Français (FLE/Soutien)", icon: "languages" },
                { name: "Anglais (Général/Business)", icon: "earth" },
                { name: "Espagnol", icon: "message-square" },
                { name: "Alphabétisation", icon: "book-type" }
            ],
            "Pôle Métiers": [
                { name: "Coiffure (Coupe, Brushing, Coloration)", icon: "scissors" },
                { name: "Esthétique (Soins, Maquillage, Onglerie)", icon: "palette" }
            ]
        };

        const EXCHANGE_RATE = 2000; // Taux indicatif 1$ = 2000 FC

        let state = {
            students: JSON.parse(localStorage.getItem('gfim_students')) || [],
            trainers: JSON.parse(localStorage.getItem('gfim_trainers')) || [],
            sites: JSON.parse(localStorage.getItem('gfim_sites')) || [
                { id: 1, name: 'Site Central', location: 'Avenue du Port, Muanda', capacity: 50, schedule: 'Lun - Sam : 08h - 18h', theme: 'blue' }
            ]
        };

        let trainerPhotoData = null;

        function save() {
            localStorage.setItem('gfim_students', JSON.stringify(state.students));
            localStorage.setItem('gfim_trainers', JSON.stringify(state.trainers));
            localStorage.setItem('gfim_sites', JSON.stringify(state.sites));
            refreshUI();
        }

        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById('tab-' + id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => {
                b.classList.remove('bg-blue-50', 'text-blue-600', 'font-semibold');
                if(b.dataset.tab === id) b.classList.add('bg-blue-50', 'text-blue-600', 'font-semibold');
            });
            lucide.createIcons();
        }

        function updateClock() {
            document.getElementById('live-clock').innerText = new Date().toLocaleTimeString('fr-FR');
        }
        setInterval(updateClock, 1000);

        function calcPrice() {
            const type = document.querySelector('input[name="courseType"]:checked').value;
            const count = document.querySelectorAll('input[name="subject"]:checked').length;
            const total = count * (type === 'Solo' ? 20 : 2);
            document.getElementById('reg-price').innerText = total + '$';
            document.getElementById('reg-price-fc').innerText = (total * EXCHANGE_RATE).toLocaleString('fr-FR') + ' FC';
        }

        function refreshUI() {
            // Stats
            document.getElementById('dash-students').innerText = state.students.length;
            document.getElementById('dash-revenue').innerText = state.students.reduce((a, s) => a + (s.paid || 0), 0) + "$";
            document.getElementById('dash-trainers-count').innerText = state.trainers.length;
            
            const cap = state.sites.reduce((a, s) => a + parseInt(s.capacity || 0), 0);
            document.getElementById('dash-occupancy').innerText = cap > 0 ? Math.round((state.students.length / cap) * 100) + "%" : "0%";

            // Pie Chart
            let l = 0, m = 0;
            state.students.forEach(s => s.subjects.forEach(sub => {
                if (POLES["Pôle Langues & Communication"].some(x => x.name === sub)) l++;
                else m++;
            }));
            const total = l + m || 1;
            document.getElementById('pie-total-center').innerText = state.students.length;
            document.getElementById('count-langues').innerText = l;
            document.getElementById('count-metiers').innerText = m;
            document.getElementById('pie-langues').style.strokeDasharray = `${(l/total)*100} 100`;
            document.getElementById('pie-metiers').style.strokeDasharray = `${(m/total)*100} 100`;
            document.getElementById('pie-metiers').style.strokeDashoffset = `-${(l/total)*100}`;

            // Recent Inscriptions
            document.getElementById('recent-activity').innerHTML = state.students.slice(-4).reverse().map(s => `
                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-2xl">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center font-bold text-blue-600 shadow-sm overflow-hidden">
                            ${s.photo ? `<img src="${s.photo}" class="w-full h-full object-cover">` : s.lastName[0]}
                        </div>
                        <div>
                            <p class="text-xs font-black uppercase text-slate-800">${s.lastName} ${s.firstName}</p>
                            <p class="text-[10px] text-slate-400 font-bold uppercase">${s.subjects[0]}</p>
                        </div>
                    </div>
                    <p class="text-xs font-black text-emerald-600">+${s.paid}$</p>
                </div>
            `).join('');

            // Table
            document.getElementById('apprenants-tbody').innerHTML = state.students.map(s => `
                <tr class="border-b border-slate-50 hover:bg-slate-50 transition-colors text-sm">
                    <td class="p-4">
                        <div class="w-10 h-10 rounded-full bg-slate-100 overflow-hidden flex items-center justify-center">
                            ${s.photo ? `<img src="${s.photo}" class="w-full h-full object-cover">` : `<i data-lucide="user" class="w-4 h-4 text-slate-300"></i>`}
                        </div>
                    </td>
                    <td class="p-4"><p class="font-black uppercase">${s.lastName} ${s.firstName}</p></td>
                    <td class="p-4 text-xs font-bold text-blue-600">${s.subjects.join(', ')}</td>
                    <td class="p-4"><span class="text-[10px] font-black uppercase">${s.gender}</span></td>
                    <td class="p-4 font-mono text-xs">${s.phone}</td>
                    <td class="p-4 text-right"><button class="text-slate-300 hover:text-blue-600"><i data-lucide="more-horizontal"></i></button></td>
                </tr>
            `).join('');

            // Sites
            document.getElementById('sites-list').innerHTML = state.sites.map(s => `
                <div class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm">
                    <h3 class="font-black text-slate-800 mb-1">${s.name}</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase mb-4">${s.location}</p>
                    <div class="bg-slate-50 p-3 rounded-2xl flex justify-between items-center">
                        <span class="text-[10px] font-black uppercase text-slate-500">Capacité</span>
                        <span class="text-xs font-bold">${s.capacity}</span>
                    </div>
                </div>
            `).join('');

            // Trainers
            document.getElementById('trainers-list').innerHTML = state.trainers.map(t => `
                <div class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm flex items-center gap-4">
                    <div class="w-14 h-14 bg-slate-50 rounded-2xl overflow-hidden flex items-center justify-center">
                        ${t.photo ? `<img src="${t.photo}" class="w-full h-full object-cover">` : `<i data-lucide="user" class="text-slate-200"></i>`}
                    </div>
                    <div>
                        <h4 class="font-bold text-sm uppercase">${t.name}</h4>
                        <p class="text-[10px] font-black text-blue-600 uppercase italic">${t.subject}</p>
                    </div>
                </div>
            `).join('');

            lucide.createIcons();
        }

        // Modals
        function toggleModal(id, show) { document.getElementById(id).classList.toggle('active', show); }
        function openTrainerModal() { 
            toggleModal('trainer-modal', true);
            document.getElementById('trainer-sites-checkboxes').innerHTML = state.sites.map(s => `
                <label class="text-[10px] bg-slate-50 px-2 py-1 rounded cursor-pointer has-[:checked]:bg-blue-600 has-[:checked]:text-white">
                    <input type="checkbox" name="sites" value="${s.name}" class="hidden"> ${s.name}
                </label>
            `).join('');
        }

        // Photo Preview Handling
        document.getElementById('student-photo').onchange = (e) => {
            const reader = new FileReader();
            reader.onload = (ev) => { 
                const img = document.getElementById('student-photo-preview');
                img.src = ev.target.result;
                img.classList.remove('hidden');
            };
            reader.readAsDataURL(e.target.files[0]);
        };

        // Form Submission
        document.getElementById('reg-form').onsubmit = (e) => {
            e.preventDefault();
            const fd = new FormData(e.target);
            const subjs = Array.from(document.querySelectorAll('input[name="subject"]:checked')).map(i => i.value);
            if(subjs.length === 0) return alert("Veuillez choisir au moins une formation.");
            
            const type = fd.get('courseType');
            const student = {
                id: Date.now(),
                lastName: fd.get('lastName'),
                firstName: fd.get('firstName'),
                birthDate: fd.get('birthDate'),
                gender: fd.get('gender'),
                address: fd.get('address'),
                phone: fd.get('phone'),
                email: fd.get('email'),
                subjects: subjs,
                education: fd.get('educationLevel'),
                status: fd.get('status'),
                schedules: Array.from(fd.getAll('schedulePref')),
                type: type,
                paid: subjs.length * (type === 'Solo' ? 20 : 2),
                photo: document.getElementById('student-photo-preview').classList.contains('hidden') ? null : document.getElementById('student-photo-preview').src
            };
            
            state.students.push(student);
            e.target.reset();
            document.getElementById('student-photo-preview').classList.add('hidden');
            save();
            switchTab('apprenants');
        };

        document.getElementById('trainer-photo-input').onchange = (e) => {
            const reader = new FileReader();
            reader.onload = (ev) => { 
                trainerPhotoData = ev.target.result; 
                document.getElementById('trainer-photo-preview-div').innerHTML = `<img src="${trainerPhotoData}" class="w-full h-full object-cover">`; 
            };
            reader.readAsDataURL(e.target.files[0]);
        };

        document.getElementById('trainer-form').onsubmit = (e) => {
            e.preventDefault();
            const fd = new FormData(e.target);
            state.trainers.push({
                id: Date.now(),
                name: fd.get('name'),
                subject: fd.get('subject'),
                experience: fd.get('experience'),
                sites: Array.from(fd.getAll('sites')),
                photo: trainerPhotoData
            });
            e.target.reset();
            toggleModal('trainer-modal', false);
            save();
        };

        document.getElementById('site-form').onsubmit = (e) => {
            e.preventDefault();
            const fd = new FormData(e.target);
            state.sites.push({
                id: Date.now(),
                name: fd.get('siteName'),
                location: fd.get('location'),
                capacity: fd.get('capacity'),
                theme: fd.get('theme'),
                schedule: fd.get('schedule')
            });
            e.target.reset();
            toggleModal('site-modal', false);
            save();
        };

        window.onload = () => {
            const list = document.getElementById('course-list');
            list.innerHTML = Object.entries(POLES).map(([p, items]) => `
                <div class="p-6 bg-slate-50/50 rounded-3xl border border-slate-100">
                    <p class="font-black text-blue-600 uppercase text-[10px] mb-4">${p}</p>
                    <div class="space-y-3">
                        ${items.map(i => `
                            <label class="flex items-center gap-3 p-3 bg-white rounded-2xl border border-slate-100 cursor-pointer hover:border-blue-200 transition-all has-[:checked]:ring-2 has-[:checked]:ring-blue-600">
                                <input type="checkbox" name="subject" value="${i.name}" onchange="calcPrice()" class="w-4 h-4 rounded text-blue-600">
                                <span class="text-xs font-bold text-slate-700">${i.name}</span>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            document.getElementById('trainer-subject-select').innerHTML = Object.values(POLES).flat().map(c => `<option value="${c.name}">${c.name}</option>`).join('');
            refreshUI();
            updateClock();
        };
    </script>
</body>
</html>